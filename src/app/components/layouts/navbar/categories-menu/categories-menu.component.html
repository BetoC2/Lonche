<div class="categories-container">
  <div
    class="categories-header"
    (click)="toggleDropdown()"
    (keydown.enter)="toggleDropdown()"
    tabindex="0"
  >
    <h2>Categorías</h2>
    <span class="chevron" [class.up]="!isCollapsed">
      <ng-icon name="faSolidAngleDown"></ng-icon>
    </span>
  </div>

  @if (isCollapsed) {
    <div class="search-container">
      <input
        type="text"
        placeholder="Buscar categoría"
        class="search-input"
        [(ngModel)]="searchQuery"
        (input)="onSearch(searchQuery)"
      />
    </div>
    <div class="category-buttons">
      @for (category of visibleCategories; track category.name) {
        <button
          class="category-button"
          [style.background-color]="'#' + category.color"
        >
          {{ category.name | titlecase }}
        </button>
      }
    </div>
    <div
      class="see-more"
      (click)="toggleViewMore()"
      (keydown.enter)="toggleViewMore()"
      tabindex="0"
    >
      {{ isExpanded ? "Ver menos" : "Ver más" }}
    </div>
  }
</div>
